package br.inatel.dm110.impl;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;

import javax.enterprise.context.RequestScoped;

import br.inatel.dm110.api.CalcService;
import br.inatel.dm110.api.HelloService;
import br.inatel.dm110.api.MessageTO;

@RequestScoped
public class CalcServiceImpl implements CalcService {

	static private int count = 0;
	
	//test: in memory storage
	static private Map<Integer, MessageTO> cache = new HashMap<>();

	@Override
	public String sayHello(String name) {
		String message = "Hello " + name;
		return "<h1>" + message + "</h1>";
	}

	@Override
	public MessageTO message(String first, String last) {
		MessageTO result = new MessageTO();
		result.setFirstName(first);
		result.setLastName(last);
		String message = String.format("Hello %s %s!!!", first, last);
		result.setMessage(message);
		return result;
	}

	@Override
	public int storeNewMessage(MessageTO message) {
		message.setMessage("Hello " + message.getFirstName() + " " + message.getLastName());
		System.out.println("Message created: " + message.getMessage());
		count++;
		cache.put(count, message);
		return count;
	}
	
	@Override
	public Collection<MessageTO> getMessages() {
		return cache.values();
	}

	@Override
	public String doAddition(String op1, String op2) {
		return "<h1>Operação de soma: "+
				op1 + " + " + op2 + " = " + (Integer.parseInt(op1)+Integer.parseInt(op2)) + "</h1>";
	}

	@Override
	public String doSubtraction(String op1, String op2) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String doMultiplication(String op1, String op2) {
		// TODO Auto-generated method stub
		return null;
	}

	@Override
	public String doDivision(String op1, String op2) {
		// TODO Auto-generated method stub
		return null;
	}
}
